<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Canvas Editor</title>
<script src="https://art009bas.github.io/reestr/tailwind.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .canvas-container {
            position: relative;
            overflow: hidden;
            background-color: white;
        }
        
        .element {
            position: absolute;
            cursor: move;
            user-select: none;
        }
        
        .element.selected {
            outline: 2px dashed #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans flex flex-col h-screen">
    <!-- Top Toolbar -->
    <div class="bg-white shadow-md px-4 py-2 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <h1 class="text-xl font-bold text-blue-600">Simple Canvas Editor</h1>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Left Sidebar - Tools -->
        <div class="w-16 bg-white shadow-md flex flex-col items-center py-4 space-y-4">
            <button class="tool-btn active" data-tool="select" title="Select">
                <i class="fas fa-mouse-pointer text-blue-600"></i>
            </button>
            <button class="tool-btn" data-tool="text" title="Text">
                <i class="fas fa-font"></i>
            </button>
            <button class="tool-btn" data-tool="rectangle" title="Rectangle">
                <i class="fas fa-square"></i>
            </button>
            <button class="tool-btn" data-tool="circle" title="Circle">
                <i class="fas fa-circle"></i>
            </button>
        </div>

        <!-- Canvas Area -->
        <div class="flex-1 relative overflow-auto">
            <div id="canvas-container" class="canvas-container mx-auto bg-white shadow-lg relative">
                <div id="canvas" style="width: 800px; height: 600px;">
                    <!-- Elements will be added here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple state management
        const state = {
            currentTool: 'select',
            selectedElement: null,
            elements: [],
            nextId: 1
        };

        // DOM elements
        const canvas = document.getElementById('canvas');
        const toolButtons = document.querySelectorAll('.tool-btn');

        // Initialize the canvas
        function init() {
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Tool buttons
            toolButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    toolButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    state.currentTool = this.dataset.tool;
                });
            });

            // Canvas events
            canvas.addEventListener('mousedown', handleCanvasMouseDown);
        }

        // Handle canvas mouse down
        function handleCanvasMouseDown(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (state.currentTool === 'select') {
                const clickedElement = findElementAtPosition(x, y);
                if (clickedElement) {
                    selectElement(clickedElement.id);
                } else {
                    deselectElement();
                }
            } else if (state.currentTool === 'text') {
                addTextElement(x, y);
            } else if (state.currentTool === 'rectangle') {
                addRectangle(x, y);
            } else if (state.currentTool === 'circle') {
                addCircle(x, y);
            }
        }

        // Find element at position
        function findElementAtPosition(x, y) {
            for (let i = state.elements.length - 1; i >= 0; i--) {
                const element = document.getElementById(state.elements[i].id);
                if (!element) continue;
                
                const elX = parseInt(element.style.left);
                const elY = parseInt(element.style.top);
                const elWidth = parseInt(element.style.width);
                const elHeight = parseInt(element.style.height);
                
                if (x >= elX && x <= elX + elWidth && y >= elY && y <= elY + elHeight) {
                    return element;
                }
            }
            return null;
        }

        // Select element
        function selectElement(id) {
            if (state.selectedElement) {
                const prevElement = document.getElementById(state.selectedElement);
                if (prevElement) prevElement.classList.remove('selected');
            }
            
            state.selectedElement = id;
            const element = document.getElementById(id);
            if (element) {
                element.classList.add('selected');
            }
        }

        // Deselect element
        function deselectElement() {
            if (state.selectedElement) {
                const element = document.getElementById(state.selectedElement);
                if (element) {
                    element.classList.remove('selected');
                }
                state.selectedElement = null;
            }
        }

        // Add text element
        function addTextElement(x, y) {
            const id = `element-${state.nextId++}`;
            const element = document.createElement('div');
            
            element.id = id;
            element.className = 'element';
            element.style.position = 'absolute';
            element.style.left = `${x}px`;
            element.style.top = `${y}px`;
            element.style.width = '200px';
            element.style.padding = '8px';
            element.style.fontFamily = 'Arial';
            element.style.fontSize = '16px';
            element.style.color = 'black';
            element.style.backgroundColor = 'white';
            element.style.border = '1px solid #ccc';
            element.textContent = 'Double click to edit';
            element.contentEditable = 'true';
            
            canvas.appendChild(element);
            state.elements.push({ id, type: 'text' });
            selectElement(id);
        }

        // Add rectangle
        function addRectangle(x, y) {
            const id = `element-${state.nextId++}`;
            const element = document.createElement('div');
            
            element.id = id;
            element.className = 'element';
            element.style.position = 'absolute';
            element.style.left = `${x}px`;
            element.style.top = `${y}px`;
            element.style.width = '100px';
            element.style.height = '80px';
            element.style.backgroundColor = '#3b82f6';
            
            canvas.appendChild(element);
            state.elements.push({ id, type: 'rectangle' });
            selectElement(id);
        }

        // Add circle
        function addCircle(x, y) {
            const id = `element-${state.nextId++}`;
            const element = document.createElement('div');
            
            element.id = id;
            element.className = 'element';
            element.style.position = 'absolute';
            element.style.left = `${x}px`;
            element.style.top = `${y}px`;
            element.style.width = '80px';
            element.style.height = '80px';
            element.style.borderRadius = '50%';
            element.style.backgroundColor = '#ef4444';
            
            canvas.appendChild(element);
            state.elements.push({ id, type: 'circle' });
            selectElement(id);
        }

        // Initialize the app
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
